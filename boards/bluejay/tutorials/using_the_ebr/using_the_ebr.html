<!DOCTYPE html>
<html lang="en"><head>
        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
        <meta content="Using the EBR - Documentation and resources from Bluejay Devices." name="description"/>
        <title>Using the EBR | Bluejay Devices</title>
        <link href="/images/logo.svg" rel="icon"/>
        <link href="/css/styles.css" rel="stylesheet"/>
        <link href="/css/content.css" rel="stylesheet"/>
        <link href="/css/syntax.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com" rel="preconnect"/><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css2?family=Averia+Libre:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&amp;family=Nunito:ital,wght@0,200..1000;1,200..1000&amp;display=swap" rel="stylesheet"/></head>
    <body data-page-id="boards-bluejay-tutorials-using_the_ebr">
        <div class="header">
            <a class="nav-logo" href="/index.html">
                <img alt="logo" src="/images/bluejay_devices.svg"/>
            </a>
            <div class="header-right">
                <div class="navbar">
                    <a class="button navbar-button" href="/about/about.html">
                        About
                    </a>
                    <a class="button navbar-button" href="/boards/boards.html">
                        Boards
                    </a>
                    <a class="button navbar-button" href="/contact/contact.html">
                        Contact
                    </a>
                </div>
                <a aria-label="GitHub" class="icon-button" href="https://github.com/Bluejay-Devices" rel="noopener noreferrer" target="_blank">
                        <svg fill="currentColor" height="2rem" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path>
                        </svg>
                </a>
                <div class="nav-hamburger-button">
                    <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="800px" stroke="currentColor" style="width: 2.5rem; height: 2.5rem" viewBox="0 0 24 24" width="800px" xmlns="http://www.w3.org/2000/svg"><path d="M20 7L4 7" stroke-linecap="round" stroke-width="1.5"></path><path d="M20 12L4 12" stroke-linecap="round" stroke-width="1.5"></path><path d="M20 17L4 17" stroke-linecap="round" stroke-width="1.5"></path></svg></div>
            </div>
        </div>
        <div class="side-nav">
            <div class="nav-item" data-page-id="" id="side-nav-">
                <div class="nav-toggle">
                    <div>
                        Home
                    </div>
                    <div class="nav-button-chevron">
                        <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                </div>
                <div class="nav-item" data-page-id="about" id="side-nav-about">
                    <div class="nav-button">
                        <a href="/about/about.html">
                            About
                        </a>
                    </div>
                </div>
                <div class="nav-item" data-page-id="boards" id="side-nav-boards">
                    <div class="nav-toggle">
                        <div>
                            Boards
                        </div>
                        <div class="nav-button-chevron">
                            <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                    </div>
                    <div class="nav-item" data-page-id="boards-jay40" id="side-nav-boards-jay40">
                        <div class="nav-toggle">
                            <div>
                                Jay40
                            </div>
                            <div class="nav-button-chevron">
                                <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-jay40-input_output" id="side-nav-boards-jay40-input_output">
                            <div class="nav-button">
                                <a href="/boards/jay40/input_output/input_output.html">
                                    Input/Output
                                </a>
                            </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-jay40-configuration" id="side-nav-boards-jay40-configuration">
                            <div class="nav-button">
                                <a href="/boards/jay40/configuration/configuration.html">
                                    Configuration
                                </a>
                            </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-jay40-power" id="side-nav-boards-jay40-power">
                            <div class="nav-button">
                                <a href="/boards/jay40/power/power.html">
                                    Power
                                </a>
                            </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-jay40-using_a_pll" id="side-nav-boards-jay40-using_a_pll">
                            <div class="nav-button">
                                <a href="/boards/jay40/using_a_pll/using_a_pll.html">
                                    Using a PLL
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="nav-item" data-page-id="boards-bluejay" id="side-nav-boards-bluejay">
                        <div class="nav-toggle">
                            <div>
                                Bluejay
                            </div>
                            <div class="nav-button-chevron">
                                <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-bluejay-getting_started" id="side-nav-boards-bluejay-getting_started">
                            <div class="nav-toggle">
                                <div>
                                    Getting Started
                                </div>
                                <div class="nav-button-chevron">
                                    <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-getting_started-introduction" id="side-nav-boards-bluejay-getting_started-introduction">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/getting_started/introduction/introduction.html">
                                        Introduction
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-getting_started-installing_the_tools" id="side-nav-boards-bluejay-getting_started-installing_the_tools">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/getting_started/installing_the_tools/installing_the_tools.html">
                                        Installing the Tools
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-getting_started-creating_your_First_design" id="side-nav-boards-bluejay-getting_started-creating_your_First_design">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/getting_started/creating_your_First_design/creating_your_First_design.html">
                                        Creating Your First Design
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-getting_started-building_the_bitstream" id="side-nav-boards-bluejay-getting_started-building_the_bitstream">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/getting_started/building_the_bitstream/building_the_bitstream.html">
                                        Building the Bitstream
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-getting_started-programming_the_board" id="side-nav-boards-bluejay-getting_started-programming_the_board">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/getting_started/programming_the_board/programming_the_board.html">
                                        Programming the Board
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-bluejay-board_information" id="side-nav-boards-bluejay-board_information">
                            <div class="nav-toggle">
                                <div>
                                    Board Information
                                </div>
                                <div class="nav-button-chevron">
                                    <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-board_overview" id="side-nav-boards-bluejay-board_information-board_overview">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/board_overview/board_overview.html">
                                        Board Overview
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-board_io" id="side-nav-boards-bluejay-board_information-board_io">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/board_io/board_io.html">
                                        Board I/O
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-pin_mappings" id="side-nav-boards-bluejay-board_information-pin_mappings">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/pin_mappings/pin_mappings.html">
                                        Pin Mappings
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-power_delivery" id="side-nav-boards-bluejay-board_information-power_delivery">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/power_delivery/power_delivery.html">
                                        Power Delivery
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-configuration_and_programming" id="side-nav-boards-bluejay-board_information-configuration_and_programming">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/configuration_and_programming/configuration_and_programming.html">
                                        Configuration and Programming
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-status_leds" id="side-nav-boards-bluejay-board_information-status_leds">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/status_leds/status_leds.html">
                                        Status LEDs
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-board_topology" id="side-nav-boards-bluejay-board_information-board_topology">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/board_topology/board_topology.html">
                                        Board Topology
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-mechanical_information" id="side-nav-boards-bluejay-board_information-mechanical_information">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/mechanical_information/mechanical_information.html">
                                        Mechanical Information
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-bluejay-tutorials" id="side-nav-boards-bluejay-tutorials">
                            <div class="nav-toggle">
                                <div>
                                    Tutorials
                                </div>
                                <div class="nav-button-chevron">
                                    <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-tutorials-using_the_pll" id="side-nav-boards-bluejay-tutorials-using_the_pll">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/tutorials/using_the_pll/using_the_pll.html">
                                        Using the PLL
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-tutorials-using_the_ebr" id="side-nav-boards-bluejay-tutorials-using_the_ebr">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/tutorials/using_the_ebr/using_the_ebr.html">
                                        Using the EBR
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="nav-item" data-page-id="contact" id="side-nav-contact">
                    <div class="nav-button">
                        <a href="/contact/contact.html">
                            Contact
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="main">
            <div class="docs">
                <div class="markdown-content">
                    <h1>Using the Embedded Block RAM (EBR)</h1>
                    <h2>Overview</h2>
                    <p>The iCE40LP8K includes 128 Kbits of Embedded Block RAM (EBR) organized as 32 blocks of 4 Kbit each. This tutorial demonstrates how to use the EBR to store and playback a Morse code pattern on the USR LED.</p>
                    <h2>What You'll Learn</h2>
                    <ul>
                    <li>How to instantiate an iCE40 EBR primitive</li>
                    <li>How to configure EBR read and write modes</li>
                    <li>How to initialize EBR contents for read-only data</li>
                    </ul>
                    <h2>Design Overview</h2>
                    <p>This example stores a Morse code message ("HELLO") in the EBR and plays it back on the USR LED. The design reads the timing pattern from memory and controls the LED accordingly. A dot is a short blink, a dash is a long blink, and spaces represent pauses between letters.</p>
                    <h2>Design Files</h2>
                    <h3>ebr_demo.sv</h3>
                    <p>The top-level module instantiates the EBR primitive and implements the control logic:</p>
                    <div class="code-wrapper"><span class="code-label">Systemverilog</span><button aria-label="Copy to clipboard" class="copy-button"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"><rect height="13" rx="2" ry="2" width="13" x="9" y="9"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><div class="codehilite" data-lang="Systemverilog"><pre><span></span><code><span class="k">module</span><span class="w"> </span><span class="n">ebr_demo</span><span class="w"> </span>
<span class="p">(</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
<span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">logic</span><span class="w"> </span><span class="n">out</span>
<span class="p">);</span>

<span class="c1">// Timing constants (12 MHz clock)</span>
<span class="k">localparam</span><span class="w"> </span><span class="n">UNIT_TIME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12_000_000</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="c1">// 100ms per unit</span>

<span class="c1">// EBR signals</span>
<span class="kt">logic</span><span class="w"> </span><span class="n">RCLK</span><span class="p">;</span>
<span class="kt">logic</span><span class="w"> </span><span class="n">RCLKE</span><span class="p">;</span>
<span class="kt">logic</span><span class="w"> </span><span class="n">RE</span><span class="p">;</span>
<span class="kt">logic</span><span class="w"> </span><span class="p">[</span><span class="mi">8</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">RADDR</span><span class="p">;</span>
<span class="kt">logic</span><span class="w"> </span><span class="p">[</span><span class="mi">7</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">RDATA</span><span class="p">;</span>
<span class="kt">logic</span><span class="w"> </span><span class="n">WCLK</span><span class="p">;</span>
<span class="kt">logic</span><span class="w"> </span><span class="n">WCLKE</span><span class="p">;</span>
<span class="kt">logic</span><span class="w"> </span><span class="n">WE</span><span class="p">;</span>
<span class="kt">logic</span><span class="w"> </span><span class="p">[</span><span class="mi">8</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">WADDR</span><span class="p">;</span>
<span class="kt">logic</span><span class="w"> </span><span class="p">[</span><span class="mi">7</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">WDATA</span><span class="p">;</span>

<span class="c1">// Control signals</span>
<span class="kt">logic</span><span class="w"> </span><span class="p">[</span><span class="mi">23</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">timer</span><span class="p">;</span>
<span class="kt">logic</span><span class="w"> </span><span class="p">[</span><span class="mi">8</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">addr</span><span class="p">;</span>
<span class="kt">logic</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">pattern_bit</span><span class="p">;</span>
<span class="kt">logic</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">current_pattern</span><span class="p">;</span>

<span class="c1">// Clock assignments</span>
<span class="k">assign</span><span class="w"> </span><span class="n">RCLK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clk</span><span class="p">;</span>
<span class="k">assign</span><span class="w"> </span><span class="n">WCLK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clk</span><span class="p">;</span>

<span class="c1">// Read-only operation</span>
<span class="k">assign</span><span class="w"> </span><span class="n">RCLKE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mb">1'b1</span><span class="p">;</span>
<span class="k">assign</span><span class="w"> </span><span class="n">RE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mb">1'b1</span><span class="p">;</span>
<span class="k">assign</span><span class="w"> </span><span class="n">RADDR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">addr</span><span class="p">;</span>
<span class="k">assign</span><span class="w"> </span><span class="n">WCLKE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mb">1'b0</span><span class="p">;</span>
<span class="k">assign</span><span class="w"> </span><span class="n">WE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mb">1'b0</span><span class="p">;</span>
<span class="k">assign</span><span class="w"> </span><span class="n">WADDR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">9'h0</span><span class="p">;</span>
<span class="k">assign</span><span class="w"> </span><span class="n">WDATA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">8'h0</span><span class="p">;</span>

<span class="c1">// Morse code patterns (2 bits per symbol)</span>
<span class="c1">// 00 = off, 01 = dot, 10 = dash, 11 = letter space</span>
<span class="c1">// H: .... (4 dots)         = 01_01_01_01</span>
<span class="c1">// E: . (1 dot)             = 01_00_00_00</span>
<span class="c1">// L: .-.. (dot, dash, 2 dots) = 01_10_01_01</span>
<span class="c1">// L: .-.. (dot, dash, 2 dots) = 01_10_01_01</span>
<span class="c1">// O: --- (3 dashes)        = 10_10_10_00</span>
<span class="c1">// Word space               = 11_11_11_11</span>

<span class="c1">//==============================</span>
<span class="c1">// EBR Instance (512x8 mode)</span>
<span class="c1">//==============================</span>
<span class="n">SB_RAM40_4K</span><span class="w"> </span><span class="p">#(</span>
<span class="w">    </span><span class="p">.</span><span class="n">WRITE_MODE</span><span class="p">(</span><span class="mh">2'h1</span><span class="p">),</span><span class="w">  </span><span class="c1">// 512x8 mode</span>
<span class="w">    </span><span class="p">.</span><span class="n">READ_MODE</span><span class="p">(</span><span class="mh">2'h1</span><span class="p">),</span><span class="w">   </span><span class="c1">// 512x8 mode</span>
<span class="w">    </span><span class="p">.</span><span class="n">INIT_0</span><span class="p">(</span><span class="mh">256'h55_00_55_55_AA_55_55_FF_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00</span><span class="p">),</span>
<span class="w">    </span><span class="p">.</span><span class="n">INIT_1</span><span class="p">(</span><span class="mh">256'h00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00</span><span class="p">)</span>
<span class="p">)</span><span class="w"> </span><span class="n">u_ebr</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">.</span><span class="n">RCLK</span><span class="p">(</span><span class="n">RCLK</span><span class="p">),</span>
<span class="w">    </span><span class="p">.</span><span class="n">RCLKE</span><span class="p">(</span><span class="n">RCLKE</span><span class="p">),</span>
<span class="w">    </span><span class="p">.</span><span class="n">RE</span><span class="p">(</span><span class="n">RE</span><span class="p">),</span>
<span class="w">    </span><span class="p">.</span><span class="n">RADDR</span><span class="p">(</span><span class="n">RADDR</span><span class="p">),</span>
<span class="w">    </span><span class="p">.</span><span class="n">RDATA</span><span class="p">(</span><span class="n">RDATA</span><span class="p">),</span>
<span class="w">    </span><span class="p">.</span><span class="n">WCLK</span><span class="p">(</span><span class="n">WCLK</span><span class="p">),</span>
<span class="w">    </span><span class="p">.</span><span class="n">WCLKE</span><span class="p">(</span><span class="n">WCLKE</span><span class="p">),</span>
<span class="w">    </span><span class="p">.</span><span class="n">WE</span><span class="p">(</span><span class="n">WE</span><span class="p">),</span>
<span class="w">    </span><span class="p">.</span><span class="n">WADDR</span><span class="p">(</span><span class="n">WADDR</span><span class="p">),</span>
<span class="w">    </span><span class="p">.</span><span class="n">WDATA</span><span class="p">(</span><span class="n">WDATA</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// Extract current pattern from memory (2 bits per pattern)</span>
<span class="k">assign</span><span class="w"> </span><span class="n">current_pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RDATA</span><span class="p">[</span><span class="n">pattern_bit</span><span class="o">*</span><span class="mi">2</span><span class="w"> </span><span class="o">+:</span><span class="w"> </span><span class="mi">2</span><span class="p">];</span>

<span class="c1">// Control logic</span>
<span class="k">always_ff</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">timer</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">UNIT_TIME</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="n">timer</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">timer</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="k">end</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="n">timer</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// Move to next pattern</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pattern_bit</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">            </span><span class="n">pattern_bit</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">pattern_bit</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="k">end</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
<span class="w">            </span><span class="n">pattern_bit</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">addr</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span><span class="w">  </span><span class="c1">// 8 bytes total for the pattern</span>
<span class="w">                </span><span class="n">addr</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">addr</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">            </span><span class="k">end</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
<span class="w">                </span><span class="n">addr</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">  </span><span class="c1">// Loop back to start</span>
<span class="w">            </span><span class="k">end</span>
<span class="w">        </span><span class="k">end</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">end</span>

<span class="c1">// LED output control</span>
<span class="k">always_ff</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="n">current_pattern</span><span class="p">)</span>
<span class="w">        </span><span class="mb">2'b00</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mb">1'b0</span><span class="p">;</span><span class="w">                    </span><span class="c1">// Off</span>
<span class="w">        </span><span class="mb">2'b01</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">(</span><span class="n">timer</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">UNIT_TIME</span><span class="p">);</span><span class="w">     </span><span class="c1">// Dot (1 unit)</span>
<span class="w">        </span><span class="mb">2'b10</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">(</span><span class="n">timer</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="o">*</span><span class="n">UNIT_TIME</span><span class="o">/</span><span class="mi">4</span><span class="p">);</span><span class="w"> </span><span class="c1">// Dash (3 units)</span>
<span class="w">        </span><span class="mb">2'b11</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mb">1'b0</span><span class="p">;</span><span class="w">                    </span><span class="c1">// Letter/word space</span>
<span class="w">        </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mb">1'b0</span><span class="p">;</span>
<span class="w">    </span><span class="k">endcase</span>
<span class="k">end</span>

<span class="k">endmodule</span>
</code></pre></div></div>

                    <p>The <code>SB_RAM40_4K</code> module is a hard macro primitive specific to the iCE40 FPGA. During synthesis, Yosys recognizes this primitive and preserves it rather than synthesizing it into generic logic. NextPNR then maps this primitive to one of the physical EBR blocks available on the iCE40LP8K during place-and-route. This ensures the memory functionality is implemented using the dedicated hardware rather than being emulated in the FPGA fabric.</p>
                    <h3>Understanding the EBR Configuration</h3>
                    <p>The <code>SB_RAM40_4K</code> primitive can be configured in different modes:</p>
                    <p><strong>Write/Read Modes:</strong>
                    - <code>2'h0</code>: 256×16 configuration (256 addresses, 16-bit data width)
                    - <code>2'h1</code>: 512×8 configuration (512 addresses, 8-bit data width)
                    - <code>2'h2</code>: 1024×4 configuration (1024 addresses, 4-bit data width)
                    - <code>2'h3</code>: 2048×2 configuration (2048 addresses, 2-bit data width)</p>
                    <p><strong>This design uses 512×8 mode (<code>2'h1</code>)</strong>, which provides 512 addressable locations with 8 bits of data each.</p>
                    <p><strong>Initialization:</strong>
                    The <code>INIT_0</code> through <code>INIT_F</code> parameters allow you to initialize the EBR contents. Each <code>INIT</code> parameter holds 256 bits of data. In this example, we store Morse code patterns where:
                    - <code>2'b00</code> = Off
                    - <code>2'b01</code> = Dot (short blink)
                    - <code>2'b10</code> = Dash (long blink)
                    - <code>2'b11</code> = Letter/word space</p>
                    <p>Each byte holds four 2-bit patterns, allowing compact storage of the timing sequence.</p>
                    <h3>ebr_demo.pcf</h3>
                    <p>The pin constraints file maps the clock and LED:</p>
                    <div class="code-wrapper"><span class="code-label">Makefile</span><button aria-label="Copy to clipboard" class="copy-button"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"><rect height="13" rx="2" ry="2" width="13" x="9" y="9"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><div class="codehilite" data-lang="Makefile"><pre><span></span><code>set_io clk C4
set_io out E1
</code></pre></div></div>

                    <h2>Building the Design</h2>
                    <p>Use the following Makefile to build the design:</p>
                    <h3>Makefile</h3>
                    <div class="code-wrapper"><span class="code-label">Terminal</span><button aria-label="Copy to clipboard" class="copy-button"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"><rect height="13" rx="2" ry="2" width="13" x="9" y="9"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><div class="codehilite" data-lang="Terminal"><pre><span></span><code><span class="c"># Project configuration</span>
<span class="nv">PROJECT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ebr_demo
<span class="nv">TOP_MODULE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ebr_demo
<span class="nv">SOURCES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ebr_demo.sv
<span class="nv">PCF</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ebr_demo.pcf

<span class="c"># Output directory</span>
<span class="nv">BUILD_DIR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>gen

<span class="c"># iCE40 device configuration</span>
<span class="nv">DEVICE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>lp8k
<span class="nv">PACKAGE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>cm81

<span class="c"># Tool configuration</span>
<span class="nv">YOSYS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>yosys
<span class="nv">NEXTPNR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>nextpnr-ice40
<span class="nv">ICEPACK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>icepack
<span class="nv">ICEPROG</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>iceprog

<span class="c"># Build targets</span>
<span class="nv">JSON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>BUILD_DIR<span class="k">)</span>/<span class="k">$(</span>PROJECT<span class="k">)</span>.json
<span class="nv">ASC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>BUILD_DIR<span class="k">)</span>/<span class="k">$(</span>PROJECT<span class="k">)</span>.asc
<span class="nv">BIN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>BUILD_DIR<span class="k">)</span>/<span class="k">$(</span>PROJECT<span class="k">)</span>.bin

<span class="c"># Default target</span>
<span class="nf">all</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">BIN</span><span class="k">)</span>

<span class="c"># Create build directory</span>
<span class="nf">$(BUILD_DIR)</span><span class="o">:</span>
<span class="w">    </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="k">$(</span>BUILD_DIR<span class="k">)</span>

<span class="c"># Synthesis</span>
<span class="nf">$(JSON)</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">SOURCES</span><span class="k">)</span> <span class="p">|</span> <span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>
<span class="w">    </span><span class="k">$(</span>YOSYS<span class="k">)</span><span class="w"> </span>-p<span class="w"> </span><span class="s2">"synth_ice40 -top </span><span class="k">$(</span>TOP_MODULE<span class="k">)</span><span class="s2"> -json </span><span class="nv">$@</span><span class="s2">"</span><span class="w"> </span><span class="k">$(</span>SOURCES<span class="k">)</span>

<span class="c"># Place and route</span>
<span class="nf">$(ASC)</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">JSON</span><span class="k">)</span> <span class="k">$(</span><span class="nv">PCF</span><span class="k">)</span>
<span class="w">    </span><span class="k">$(</span>NEXTPNR<span class="k">)</span><span class="w"> </span>--<span class="k">$(</span>DEVICE<span class="k">)</span><span class="w"> </span>--package<span class="w"> </span><span class="k">$(</span>PACKAGE<span class="k">)</span><span class="w"> </span>--json<span class="w"> </span><span class="k">$(</span>JSON<span class="k">)</span><span class="w"> </span>--pcf<span class="w"> </span><span class="k">$(</span>PCF<span class="k">)</span><span class="w"> </span>--asc<span class="w"> </span><span class="nv">$@</span>

<span class="c"># Generate bitstream</span>
<span class="nf">$(BIN)</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">ASC</span><span class="k">)</span>
<span class="w">    </span><span class="k">$(</span>ICEPACK<span class="k">)</span><span class="w"> </span><span class="k">$(</span>ASC<span class="k">)</span><span class="w"> </span><span class="nv">$@</span>

<span class="c"># Program FPGA (volatile)</span>
<span class="nf">prog</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">BIN</span><span class="k">)</span>
<span class="w">    </span>sudo<span class="w"> </span><span class="k">$(</span>ICEPROG<span class="k">)</span><span class="w"> </span>-d<span class="w"> </span>i:0x0403:0x6014<span class="w"> </span>-S<span class="w"> </span><span class="k">$(</span>BIN<span class="k">)</span>

<span class="c"># Program flash (persistent)</span>
<span class="nf">flash</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">BIN</span><span class="k">)</span>
<span class="w">    </span>sudo<span class="w"> </span><span class="k">$(</span>ICEPROG<span class="k">)</span><span class="w"> </span>-d<span class="w"> </span>i:0x0403:0x6014<span class="w"> </span><span class="k">$(</span>BIN<span class="k">)</span>

<span class="c"># Clean build artifacts</span>
<span class="nf">clean</span><span class="o">:</span>
<span class="w">    </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="k">$(</span>BUILD_DIR<span class="k">)</span>

<span class="c"># Phony targets</span>
<span class="nf">.PHONY</span><span class="o">:</span><span class="w"> </span><span class="n">all</span> <span class="n">prog</span> <span class="n">flash</span> <span class="n">clean</span>
</code></pre></div></div>

                    <p>Copy this Makefile into your project directory. You can then build and program the design:</p>
                    <p><strong>Build the bitstream:</strong></p>
                    <div class="code-wrapper"><span class="code-label">Terminal</span><button aria-label="Copy to clipboard" class="copy-button"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"><rect height="13" rx="2" ry="2" width="13" x="9" y="9"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><div class="codehilite" data-lang="Terminal"><pre><span></span><code>make
</code></pre></div></div>

                    <p><strong>Program the FPGA (volatile):</strong></p>
                    <div class="code-wrapper"><span class="code-label">Terminal</span><button aria-label="Copy to clipboard" class="copy-button"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"><rect height="13" rx="2" ry="2" width="13" x="9" y="9"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><div class="codehilite" data-lang="Terminal"><pre><span></span><code>make<span class="w"> </span>prog
</code></pre></div></div>

                    <p><strong>Program the flash (persistent):</strong></p>
                    <div class="code-wrapper"><span class="code-label">Terminal</span><button aria-label="Copy to clipboard" class="copy-button"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"><rect height="13" rx="2" ry="2" width="13" x="9" y="9"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><div class="codehilite" data-lang="Terminal"><pre><span></span><code>make<span class="w"> </span>flash
</code></pre></div></div>

                    <p><strong>Clean build artifacts:</strong></p>
                    <div class="code-wrapper"><span class="code-label">Systemverilog</span><button aria-label="Copy to clipboard" class="copy-button"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"><rect height="13" rx="2" ry="2" width="13" x="9" y="9"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><div class="codehilite" data-lang="Systemverilog"><pre><span></span><code>make<span class="w"> </span>clean
</code></pre></div></div>

                    <h2>Simulation</h2>
                    <p>If you would like to simulate the design using the EBR, you will need to create a functional model to emulate the behavior of the block:</p>
                    <h3>sb_ram40_4k_model.sv</h3>
                    <div class="code-wrapper"><span class="code-label">Systemverilog</span><button aria-label="Copy to clipboard" class="copy-button"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"><rect height="13" rx="2" ry="2" width="13" x="9" y="9"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><div class="codehilite" data-lang="Systemverilog"><pre><span></span><code><span class="k">module</span><span class="w"> </span><span class="n">SB_RAM40_4K</span>
<span class="p">#(</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">WRITE_MODE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">READ_MODE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span><span class="p">,</span>
<span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">INIT_F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">256'h0</span>
<span class="p">)</span>
<span class="p">(</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">RCLK</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">RCLKE</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">RE</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mi">7</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nl">READ_MODE:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">RADDR</span><span class="p">,</span>
<span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">logic</span><span class="w"> </span><span class="p">[(</span><span class="mi">16</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">READ_MODE</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">RDATA</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">WCLK</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">WCLKE</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">WE</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mi">7</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nl">WRITE_MODE:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">WADDR</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[(</span><span class="mi">16</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">WRITE_MODE</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">WDATA</span>
<span class="p">);</span>

<span class="kt">logic</span><span class="w"> </span><span class="p">[</span><span class="mi">4095</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="p">;</span>

<span class="kt">logic</span><span class="w"> </span><span class="p">[</span><span class="mi">11</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">raddr</span><span class="p">;</span>
<span class="kt">logic</span><span class="w"> </span><span class="p">[</span><span class="mi">11</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">waddr</span><span class="p">;</span>

<span class="c1">// Initialize memory</span>
<span class="k">initial</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="n">mem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">INIT_F</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_E</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_D</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_C</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_B</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_A</span><span class="p">,</span>
<span class="w">           </span><span class="n">INIT_9</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_8</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_7</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_6</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_5</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_4</span><span class="p">,</span>
<span class="w">           </span><span class="n">INIT_3</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_2</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_1</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_0</span><span class="p">};</span>
<span class="k">end</span>

<span class="k">assign</span><span class="w"> </span><span class="n">raddr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">RADDR</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">READ_MODE</span><span class="p">));</span>
<span class="k">assign</span><span class="w"> </span><span class="n">waddr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">WADDR</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">WRITE_MODE</span><span class="p">));</span>

<span class="c1">// Write logic</span>
<span class="k">always_ff</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">WCLK</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">WCLKE</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">WE</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="n">mem</span><span class="p">[</span><span class="n">waddr</span><span class="w"> </span><span class="o">+:</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">WRITE_MODE</span><span class="p">))]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">WDATA</span><span class="p">;</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">end</span>

<span class="c1">// Read logic</span>
<span class="k">always_ff</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">RCLK</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">RCLKE</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">RE</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="n">RDATA</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">raddr</span><span class="w"> </span><span class="o">+:</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">READ_MODE</span><span class="p">))];</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">end</span>

<span class="k">endmodule</span>
</code></pre></div></div>

                    <p>This functional model can be used with simulation tools like Icarus Verilog or Verilator to verify your design before programming the FPGA.</p>
                    <h2>Customizing the Pattern</h2>
                    <p>To change the Morse code message, modify the <code>INIT_0</code> parameter. Each byte contains four 2-bit patterns:</p>
                    <ul>
                    <li><code>2'b00</code>: Off/pause</li>
                    <li><code>2'b01</code>: Dot (short blink)</li>
                    <li><code>2'b10</code>: Dash (long blink)  </li>
                    <li><code>2'b11</code>: Letter/word space (longer pause)</li>
                    </ul>
                    <p>For example, to spell "SOS" (... --- ...):</p>
                    <div class="code-wrapper"><button aria-label="Copy to clipboard" class="copy-button"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"><rect height="13" rx="2" ry="2" width="13" x="9" y="9"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><div class="codehilite"><pre><span></span><code><span class="c1">// S = ...  (3 dots)         = 01_01_01_00</span>
<span class="c1">// O = ---  (3 dashes)       = 10_10_10_00</span>
<span class="c1">// S = ...  (3 dots)         = 01_01_01_00</span>
<span class="p">.</span><span class="n">INIT_0</span><span class="p">(</span><span class="mh">256'h54_AA_54_FF_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00_00</span><span class="p">)</span>
</code></pre></div></div>

                    <h2>Additional Resources</h2>
                    <p>For more information on the iCE40 EBR:
                    - <a href="https://www.latticesemi.com/view_document?document_id=47775">iCE40 Memory Usage Guide</a>
                    - <a href="https://www.latticesemi.com/view_document?document_id=49312">iCE40 LP/HX Family Data Sheet</a></p>
                    <h2>Next Steps</h2>
                    <p>Now that you know how to use the EBR, you can:
                    - Store lookup tables for mathematical operations
                    - Implement FIFOs or circular buffers
                    - Create ROM-based finite state machines
                    - Build small data caches for processing pipelines</p>
                </div>
            </div>
        </div>
        <div class="nav">
            <div class="nav-cross-button">
                <svg fill="currentColor" style="width: 2.5rem; height: 2.5rem" viewBox="0 -0.5 25 25" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M6.96967 16.4697C6.67678 16.7626 6.67678 17.2374 6.96967 17.5303C7.26256 17.8232 7.73744 17.8232 8.03033 17.5303L6.96967 16.4697ZM13.0303 12.5303C13.3232 12.2374 13.3232 11.7626 13.0303 11.4697C12.7374 11.1768 12.2626 11.1768 11.9697 11.4697L13.0303 12.5303ZM11.9697 11.4697C11.6768 11.7626 11.6768 12.2374 11.9697 12.5303C12.2626 12.8232 12.7374 12.8232 13.0303 12.5303L11.9697 11.4697ZM18.0303 7.53033C18.3232 7.23744 18.3232 6.76256 18.0303 6.46967C17.7374 6.17678 17.2626 6.17678 16.9697 6.46967L18.0303 7.53033ZM13.0303 11.4697C12.7374 11.1768 12.2626 11.1768 11.9697 11.4697C11.6768 11.7626 11.6768 12.2374 11.9697 12.5303L13.0303 11.4697ZM16.9697 17.5303C17.2626 17.8232 17.7374 17.8232 18.0303 17.5303C18.3232 17.2374 18.3232 16.7626 18.0303 16.4697L16.9697 17.5303ZM11.9697 12.5303C12.2626 12.8232 12.7374 12.8232 13.0303 12.5303C13.3232 12.2374 13.3232 11.7626 13.0303 11.4697L11.9697 12.5303ZM8.03033 6.46967C7.73744 6.17678 7.26256 6.17678 6.96967 6.46967C6.67678 6.76256 6.67678 7.23744 6.96967 7.53033L8.03033 6.46967ZM8.03033 17.5303L13.0303 12.5303L11.9697 11.4697L6.96967 16.4697L8.03033 17.5303ZM13.0303 12.5303L18.0303 7.53033L16.9697 6.46967L11.9697 11.4697L13.0303 12.5303ZM11.9697 12.5303L16.9697 17.5303L18.0303 16.4697L13.0303 11.4697L11.9697 12.5303ZM13.0303 11.4697L8.03033 6.46967L6.96967 7.53033L11.9697 12.5303L13.0303 11.4697Z"></path> </g></svg></div>
            <div class="nav-item" data-page-id="" id="nav-">
                <div class="nav-toggle">
                    <div>
                        Home
                    </div>
                    <div class="nav-button-chevron">
                        <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                </div>
                <div class="nav-item" data-page-id="about" id="nav-about">
                    <div class="nav-button">
                        <a href="/about/about.html">
                            About
                        </a>
                    </div>
                </div>
                <div class="nav-item" data-page-id="boards" id="nav-boards">
                    <div class="nav-toggle">
                        <div>
                            Boards
                        </div>
                        <div class="nav-button-chevron">
                            <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                    </div>
                    <div class="nav-item" data-page-id="boards-jay40" id="nav-boards-jay40">
                        <div class="nav-toggle">
                            <div>
                                Jay40
                            </div>
                            <div class="nav-button-chevron">
                                <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-jay40-input_output" id="nav-boards-jay40-input_output">
                            <div class="nav-button">
                                <a href="/boards/jay40/input_output/input_output.html">
                                    Input/Output
                                </a>
                            </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-jay40-configuration" id="nav-boards-jay40-configuration">
                            <div class="nav-button">
                                <a href="/boards/jay40/configuration/configuration.html">
                                    Configuration
                                </a>
                            </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-jay40-power" id="nav-boards-jay40-power">
                            <div class="nav-button">
                                <a href="/boards/jay40/power/power.html">
                                    Power
                                </a>
                            </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-jay40-using_a_pll" id="nav-boards-jay40-using_a_pll">
                            <div class="nav-button">
                                <a href="/boards/jay40/using_a_pll/using_a_pll.html">
                                    Using a PLL
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="nav-item" data-page-id="boards-bluejay" id="nav-boards-bluejay">
                        <div class="nav-toggle">
                            <div>
                                Bluejay
                            </div>
                            <div class="nav-button-chevron">
                                <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-bluejay-getting_started" id="nav-boards-bluejay-getting_started">
                            <div class="nav-toggle">
                                <div>
                                    Getting Started
                                </div>
                                <div class="nav-button-chevron">
                                    <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-getting_started-introduction" id="nav-boards-bluejay-getting_started-introduction">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/getting_started/introduction/introduction.html">
                                        Introduction
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-getting_started-installing_the_tools" id="nav-boards-bluejay-getting_started-installing_the_tools">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/getting_started/installing_the_tools/installing_the_tools.html">
                                        Installing the Tools
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-getting_started-creating_your_First_design" id="nav-boards-bluejay-getting_started-creating_your_First_design">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/getting_started/creating_your_First_design/creating_your_First_design.html">
                                        Creating Your First Design
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-getting_started-building_the_bitstream" id="nav-boards-bluejay-getting_started-building_the_bitstream">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/getting_started/building_the_bitstream/building_the_bitstream.html">
                                        Building the Bitstream
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-getting_started-programming_the_board" id="nav-boards-bluejay-getting_started-programming_the_board">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/getting_started/programming_the_board/programming_the_board.html">
                                        Programming the Board
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-bluejay-board_information" id="nav-boards-bluejay-board_information">
                            <div class="nav-toggle">
                                <div>
                                    Board Information
                                </div>
                                <div class="nav-button-chevron">
                                    <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-board_overview" id="nav-boards-bluejay-board_information-board_overview">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/board_overview/board_overview.html">
                                        Board Overview
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-board_io" id="nav-boards-bluejay-board_information-board_io">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/board_io/board_io.html">
                                        Board I/O
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-pin_mappings" id="nav-boards-bluejay-board_information-pin_mappings">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/pin_mappings/pin_mappings.html">
                                        Pin Mappings
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-power_delivery" id="nav-boards-bluejay-board_information-power_delivery">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/power_delivery/power_delivery.html">
                                        Power Delivery
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-configuration_and_programming" id="nav-boards-bluejay-board_information-configuration_and_programming">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/configuration_and_programming/configuration_and_programming.html">
                                        Configuration and Programming
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-status_leds" id="nav-boards-bluejay-board_information-status_leds">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/status_leds/status_leds.html">
                                        Status LEDs
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-board_topology" id="nav-boards-bluejay-board_information-board_topology">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/board_topology/board_topology.html">
                                        Board Topology
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-board_information-mechanical_information" id="nav-boards-bluejay-board_information-mechanical_information">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/board_information/mechanical_information/mechanical_information.html">
                                        Mechanical Information
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="nav-item" data-page-id="boards-bluejay-tutorials" id="nav-boards-bluejay-tutorials">
                            <div class="nav-toggle">
                                <div>
                                    Tutorials
                                </div>
                                <div class="nav-button-chevron">
                                    <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --><svg fill="none" height="2rem" stroke="currentColor" viewBox="0 0 24 24" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M17 9.5L12 14.5L7 9.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>    </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-tutorials-using_the_pll" id="nav-boards-bluejay-tutorials-using_the_pll">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/tutorials/using_the_pll/using_the_pll.html">
                                        Using the PLL
                                    </a>
                                </div>
                            </div>
                            <div class="nav-item" data-page-id="boards-bluejay-tutorials-using_the_ebr" id="nav-boards-bluejay-tutorials-using_the_ebr">
                                <div class="nav-button">
                                    <a href="/boards/bluejay/tutorials/using_the_ebr/using_the_ebr.html">
                                        Using the EBR
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="nav-item" data-page-id="contact" id="nav-contact">
                    <div class="nav-button">
                        <a href="/contact/contact.html">
                            Contact
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="footer-content">
                <span>© 2026 Bluejay Devices</span>
            </div>
        </div>
    <script src="/js/app.js"></script>
    

</body></html>